@model IEnumerable<mbaliStudyGroup.Models.StudyGroup>

@{
    ViewBag.Title = "StudyGroup";
}

@*@{Html.RenderAction("CreatePerson", "StudyGroup");}*@

<link href="~/Content/style.css" rel="stylesheet" type="text/css" />


<h2>List Of People</h2>

<div class="menu">
    <div class="container">
        <div class="menu">

            <div class="menu-item"> <a href="/">Menu</a> </div>
            <div class="menu-item">   @Html.ActionLink("List", "StudyGroup", "StudyGroup") </div>
            <div class="menu-item"> <a href="/HTML/MbaliView.html">Mbali</a> </div>
            <div class="menu-item"> <a href="/HTML/AngelaView.html">Angela</a> </div>
            <div class="menu-item"> <a href="/HTML/ThaboView.html">Thabo</a> </div>
            <div class="menu-item"> <a href="/HTML/ThandoView.html">Thando</a> </div>
            <div class="menu-item"> <a href="/HTML/JohnView.html">John</a> </div>
            <div class="menu-item"> <a href="javascript:window.history.back();">Back</a> </div> <!--https://stackoverflow.com/questions/57361403/pure-html-back-button#:~:text=It%20should%20be%20%3Ca%20href,(note%20the%20javascript%3A%20) -->




        </div>
    </div>
</div>

<body>

    <a href="/StudyGroup/CreatePerson">Create Person</a> <br />
    <lable>Search String: </lable>
    <input id="personName" type="text" />
    <button onclick="setTimeout(SearchPerson, 3000)">Submit</button>


    <table id="studentTable" class="table">
        <tr>
            <th>@Html.DisplayNameFor(model => model.StudentNumber)</th>
            <th>@Html.DisplayNameFor(model => model.FirstName)</th>
            <th>@Html.DisplayNameFor(model => model.LastName)</th>
            <th>@Html.DisplayNameFor(model => model.EmailAddress)</th>
            <!-- <th></th>-->
            <th>@Html.DisplayNameFor(model => model.Delete)</th>

        </tr>

        @foreach (var groupMemeber in ViewData["group"] as IList<mbaliStudyGroup.Models.StudyGroup>)
        {
            <tr class="rowcontent">
                <td> @groupMemeber.StudentNumber </td>
                <td> @groupMemeber.FirstName</td>
                <td> @groupMemeber.LastName </td>
                <td> @groupMemeber.EmailAddress </td>
                <!-- <td><button onclick="window.location.href=''"> Link </button> </td> https://www.scaler.com/topics/how-to-make-a-button-link-to-another-page-in-html/-->
                <td><button id="delete-student" onclick="DeleteStudent(this)">Delete</button></td>
            </tr>
        }

    </table>

    <button >Save to Local Storage</button>
    <button>Retrive from Local Storage</button>
    <button>Clear Local Storage</button>
</body>



    <script type="text/javascript" >

        //Delete function
        //resource: https://www.w3schools.com/jsref/met_table_deleterow.asp 
        function DeleteStudent(r) {
            var i = r.parentNode.parentNode.rowIndex;
            document.getElementById("studentTable").deleteRow(i);
        }


        //Color chnage 
        //function SearchPerson (){
            const pattern = document.getElementById("personName");
            for (let i = 0; i < x.length; i++) {

                if (pattern.test(x[i].cells[1].innerText))

                    x[i].style.color = "red";
            }

       // }

        var array = new Array();

        function Save() {
            var table = document.getElementById("studentTable");
            //var tableRows = table.rows.length;
            //var data = [];
            //for (let i = 0; i <= tableRows - 1; i++) {

            //    localStorage.setItem("myContent", myContent);
            //}


            localStorage.setItem("table", table);




        }

        function Clear() {
            localStorage.clear();
            
        }

        function Retrive() {
            var myContent = localStorage.getItem("table");
            document.getElementByClassName("rowcontent").value = myContent;

            //for (let i = 0; i < x.length; i++) {
            //    document.getElementByClassName("rowcontent").value = myContent;
            //}
        }
    </script>


